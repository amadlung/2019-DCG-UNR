

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  
  <!-- Licensed under the Apache 2.0 License -->
  <link rel="stylesheet" type="text/css" href="_static/fonts/open-sans/stylesheet.css" />
  <!-- Licensed under the SIL Open Font License -->
  <link rel="stylesheet" type="text/css" href="_static/fonts/source-serif-pro/source-serif-pro.css" />
  <link rel="stylesheet" type="text/css" href="_static/css/bootstrap.min.css" />
  <link rel="stylesheet" type="text/css" href="_static/css/bootstrap-theme.min.css" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
    <title>5. Working with Bioconda. &#8212; 2019-UNR-omics 0.0.1 documentation</title>
    <link rel="stylesheet" href="_static/guzzle.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/language_data.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="6. Short read quality and trimming" href="quality-trimming.html" />
    <link rel="prev" title="4. Using the command line" href="bash_lesson.html" />
  
   

  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="quality-trimming.html" title="6. Short read quality and trimming"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="bash_lesson.html" title="4. Using the command line"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="toc.html">2019-UNR-omics 0.0.1 documentation</a> &#187;</li> 
      </ul>
    </div>
    <div class="container-wrapper">

      <div id="mobile-toggle">
        <a href="#"><span class="glyphicon glyphicon-align-justify" aria-hidden="true"></span></a>
      </div>
  <div id="left-column">
    <div class="sphinxsidebar">
<div class="sidebar-block">
  <div class="sidebar-wrapper">
    <h2>Contents</h2>
    <div class="sidebar-localtoc">
      <ul>
<li><a class="reference internal" href="#">5. Working with Bioconda.</a><ul>
<li><a class="reference internal" href="#what-is-bioconda">5.1. What is bioconda?</a></li>
<li><a class="reference internal" href="#what-problems-does-conda-and-therefore-bioconda-solve">5.2. What problems does conda (and therefore bioconda) solve?</a></li>
<li><a class="reference internal" href="#installing-conda-and-enabling-bioconda">5.3. Installing conda and enabling bioconda</a></li>
<li><a class="reference internal" href="#using-conda">5.4. Using conda</a></li>
<li><a class="reference internal" href="#using-bioconda">5.5. Using bioconda</a><ul>
<li><a class="reference internal" href="#finding-bioconda-packages">5.5.1. Finding bioconda packages</a></li>
<li><a class="reference internal" href="#freezing-an-environment">5.5.2. Freezing an environment</a></li>
<li><a class="reference internal" href="#constructing-and-using-multiple-environments">5.5.3. Constructing and using multiple environments</a></li>
<li><a class="reference internal" href="#meditations-on-reproducibility-and-provenance">5.5.4. Meditations on reproducibility and provenance</a></li>
<li><a class="reference internal" href="#using-it-on-your-own-compute-system-laptop-or-hpc">5.5.5. Using it on your own compute system (laptop or HPC)</a></li>
</ul>
</li>
<li><a class="reference internal" href="#rstudio-getting-started">5.6. Rstudio - Getting started</a></li>
</ul>
</li>
</ul>

    </div>
  </div>
</div>
  <h4>Previous topic</h4>
  <p class="topless"><a href="bash_lesson.html"
                        title="previous chapter">4. Using the command line</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="quality-trimming.html"
                        title="next chapter">6. Short read quality and trimming</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/bioconda-config.md.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div class="sidebar-block">
  <div class="sidebar-wrapper">
    <div id="main-search">
      <form class="form-inline" action="search.html" method="GET" role="form">
        <div class="input-group">
          <input name="q" type="text" class="form-control" placeholder="Search...">
        </div>
        <input type="hidden" name="check_keywords" value="yes" />
        <input type="hidden" name="area" value="default" />
      </form>
    </div>
  </div>
</div>
      
    </div>
  </div>
        <div id="right-column">
          
          <div role="navigation" aria-label="breadcrumbs navigation">
            <ol class="breadcrumb">
              <li><a href="toc.html">Docs</a></li>
              
              <li>5. Working with Bioconda.</li>
            </ol>
          </div>
          
          <div class="document clearer body">
            
  <div class="section" id="working-with-bioconda">
<h1>5. Working with Bioconda.<a class="headerlink" href="#working-with-bioconda" title="Permalink to this headline">¶</a></h1>
<p>Learning objectives:</p>
<ul class="simple">
<li>learn what bioconda is</li>
<li>understand basic <code class="docutils literal notranslate"><span class="pre">conda</span></code> commands</li>
<li>learn how to list installed software packages</li>
<li>learn how to manage multiple installation environments</li>
</ul>
<div class="section" id="what-is-bioconda">
<h2>5.1. What is bioconda?<a class="headerlink" href="#what-is-bioconda" title="Permalink to this headline">¶</a></h2>
<p>See <a class="reference external" href="https://www.biorxiv.org/content/early/2017/10/27/207092">the bioconda paper</a> and the <a class="reference external" href="http://bioconda.github.io">bioconda web site</a>.</p>
<p>Bioconda is a community-enabled repository of 3,000+ bioinformatics packages, installable via the <code class="docutils literal notranslate"><span class="pre">conda</span></code> package
manager.  It consists of a set of recipes, <a class="reference external" href="https://github.com/bioconda/bioconda-recipes/blob/master/recipes/sourmash/meta.yaml">like this one, for sourmash</a>, that are maintained by the community.</p>
<p>It just works, and it’s effin’ magic!!</p>
</div>
<div class="section" id="what-problems-does-conda-and-therefore-bioconda-solve">
<h2>5.2. What problems does conda (and therefore bioconda) solve?<a class="headerlink" href="#what-problems-does-conda-and-therefore-bioconda-solve" title="Permalink to this headline">¶</a></h2>
<p><img alt="_images/soft_prob.png" src="_images/soft_prob.png" />soft_prob</p>
<p>Conda tracks installed packages and their versions.</p>
<p>Conda makes sure that different installed packages don’t have
conflicting dependencies (we’ll explain this below).</p>
</div>
<div class="section" id="installing-conda-and-enabling-bioconda">
<h2>5.3. Installing conda and enabling bioconda<a class="headerlink" href="#installing-conda-and-enabling-bioconda" title="Permalink to this headline">¶</a></h2>
<p>We have already installed conda on this instance, but please see the <a class="reference external" href="https://hackmd.io/im0eDxViQgmxTL4zYBfGoQ">installation HackMD</a> after the class if you’d like to do this yourself.</p>
<p>To be able to use that installation, we need to let the instance know what path to find bioconda in:</p>
<div class="highlight-{bash} notranslate"><div class="highlight"><pre><span></span>echo export PATH=$PATH:/opt/miniconda3/bin &gt;&gt; ~/.bashrc
</pre></div>
</div>
<p>Then, run the following command (or start a new terminal session) in order to activate the conda environment:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">source</span> <span class="o">~/.</span><span class="n">bashrc</span>
</pre></div>
</div>
<p>Add channels</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">conda</span> <span class="n">config</span> <span class="o">--</span><span class="n">add</span> <span class="n">channels</span> <span class="n">defaults</span>
<span class="n">conda</span> <span class="n">config</span> <span class="o">--</span><span class="n">add</span> <span class="n">channels</span> <span class="n">conda</span><span class="o">-</span><span class="n">forge</span>
<span class="n">conda</span> <span class="n">config</span> <span class="o">--</span><span class="n">add</span> <span class="n">channels</span> <span class="n">bioconda</span>
</pre></div>
</div>
<p>Try running a program pre-installed on this instance:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">fastqc</span>
</pre></div>
</div>
</div>
<div class="section" id="using-conda">
<h2>5.4. Using conda<a class="headerlink" href="#using-conda" title="Permalink to this headline">¶</a></h2>
<p>Conda is a “package manager” or software installer. See <a class="reference external" href="https://conda.io/docs/commands.html">the full list of commands</a>.</p>
<p><code class="docutils literal notranslate"><span class="pre">conda</span> <span class="pre">install</span></code> to install a package.</p>
<p><code class="docutils literal notranslate"><span class="pre">conda</span> <span class="pre">list</span></code> to list installed packages.</p>
<p><code class="docutils literal notranslate"><span class="pre">conda</span> <span class="pre">search</span></code> to search packages. Note that you’ll see one package for every version of the software and for every version of Python (e.g. <code class="docutils literal notranslate"><span class="pre">conda</span> <span class="pre">search</span> <span class="pre">sourmash</span></code>).</p>
</div>
<div class="section" id="using-bioconda">
<h2>5.5. Using bioconda<a class="headerlink" href="#using-bioconda" title="Permalink to this headline">¶</a></h2>
<p>bioconda is a channel for conda, which just means that you
can “add” it to conda as a source of packages. That’s what the <code class="docutils literal notranslate"><span class="pre">conda</span> <span class="pre">config</span></code> above does.</p>
<p>Note, Bioconda supports only 64-bit Linux and Mac OSX.</p>
<p>You can check out <a class="reference external" href="https://bioconda.github.io/">the bioconda site</a>.</p>
<div class="section" id="finding-bioconda-packages">
<h3>5.5.1. Finding bioconda packages<a class="headerlink" href="#finding-bioconda-packages" title="Permalink to this headline">¶</a></h3>
<p>You can use <code class="docutils literal notranslate"><span class="pre">conda</span> <span class="pre">search</span></code>, or you can use google, or you can go visit <a class="reference external" href="https://bioconda.github.io/recipes.html#recipes">the list of recipes</a>.</p>
</div>
<div class="section" id="freezing-an-environment">
<h3>5.5.2. Freezing an environment<a class="headerlink" href="#freezing-an-environment" title="Permalink to this headline">¶</a></h3>
<p>This will save the list of <strong>conda-installed</strong> software you have in a particular
environment to the file <code class="docutils literal notranslate"><span class="pre">packages.txt</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">conda</span> <span class="nb">list</span> <span class="o">--</span><span class="n">export</span> <span class="o">&gt;</span> <span class="n">packages</span><span class="o">.</span><span class="n">txt</span>
</pre></div>
</div>
<p>(it will not record the software versions for software not installed by conda.)</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">conda</span> <span class="n">install</span> <span class="o">--</span><span class="n">file</span><span class="o">=</span><span class="n">packages</span><span class="o">.</span><span class="n">txt</span>
</pre></div>
</div>
<p>will install those packages in your local environment.</p>
</div>
<div class="section" id="constructing-and-using-multiple-environments">
<h3>5.5.3. Constructing and using multiple environments<a class="headerlink" href="#constructing-and-using-multiple-environments" title="Permalink to this headline">¶</a></h3>
<p>A feature that we do not use much here, but that can be very
handy in some circumstances, is different environments.</p>
<p>“Environments” are multiple different collections of installed software. There are two reasons you might want to do this:</p>
<ul class="simple">
<li>first, you might want to try to exactly replicate a specific software install, so that you can replicate a paper or an old condition.</li>
<li>second, you might be working with incompatible software, e.g. sometimes different software pipelines need different version of the same software. An example of this is older bioinformatics software that needs python2, while other software needs python3.</li>
</ul>
<p>To create a new environment named <code class="docutils literal notranslate"><span class="pre">pony</span></code>, type:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">conda</span> <span class="n">create</span> <span class="o">-</span><span class="n">n</span> <span class="n">pony</span>
</pre></div>
</div>
<p>Then to activate (switch to) that environment, type:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">source</span> <span class="n">activate</span> <span class="n">pony</span>
</pre></div>
</div>
<p>And now when you run <code class="docutils literal notranslate"><span class="pre">conda</span> <span class="pre">install</span></code>, it will install packages into this new environment, e.g.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">conda</span> <span class="n">install</span> <span class="o">-</span><span class="n">y</span> <span class="n">checkm</span><span class="o">-</span><span class="n">genome</span>
</pre></div>
</div>
<p>(note here that checkm-genome <em>requires</em> python 2).</p>
<p>To list environments, type:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">conda</span> <span class="n">env</span> <span class="nb">list</span>
</pre></div>
</div>
<p>and you will see that you have two environments, <code class="docutils literal notranslate"><span class="pre">base</span></code> and
<code class="docutils literal notranslate"><span class="pre">pony</span></code>, and <code class="docutils literal notranslate"><span class="pre">pony</span></code> has a <code class="docutils literal notranslate"><span class="pre">*</span></code> next to it because that’s your
current environment.</p>
<p>And finally, to switch back to your base environment, do:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">source</span> <span class="n">activate</span> <span class="n">base</span>
</pre></div>
</div>
<p>and you’ll be back in the original environment.</p>
</div>
<div class="section" id="meditations-on-reproducibility-and-provenance">
<h3>5.5.4. Meditations on reproducibility and provenance<a class="headerlink" href="#meditations-on-reproducibility-and-provenance" title="Permalink to this headline">¶</a></h3>
<p>If you want to impress reviewers and also keep track of
what your software versions are, you can:</p>
<ul class="simple">
<li>manage all your software inside of conda</li>
<li>use <code class="docutils literal notranslate"><span class="pre">conda</span> <span class="pre">list</span> <span class="pre">--export</span> <span class="pre">software.txt</span></code> to create a list of all your software and put it in your supplementary material.</li>
</ul>
<p>This is also something that you can record for yourself, so that if you are trying to exactly reproduce</p>
</div>
<div class="section" id="using-it-on-your-own-compute-system-laptop-or-hpc">
<h3>5.5.5. Using it on your own compute system (laptop or HPC)<a class="headerlink" href="#using-it-on-your-own-compute-system-laptop-or-hpc" title="Permalink to this headline">¶</a></h3>
<p>conda works on Windows, Mac, and Linux.</p>
<p>bioconda works on Mac and Linux.</p>
<p>It does not require admin privileges to install, so you can
install it on your own local cluster quite easily.</p>
</div>
</div>
<div class="section" id="rstudio-getting-started">
<h2>5.6. Rstudio - Getting started<a class="headerlink" href="#rstudio-getting-started" title="Permalink to this headline">¶</a></h2>
<p>Connect to RStudio by setting your password (note, password will not be visible on the screen):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>sudo passwd $USER
</pre></div>
</div>
<p>figuring out your username:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>echo My username is $USER
</pre></div>
</div>
<p>and finding YOUR RStudio server interface Web address:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>echo http://$(hostname):8787/
</pre></div>
</div>
<p>Now go to that Web address in your Web browser, and log in with the username and password from above.</p>
</div>
</div>


          </div>
            
  <div class="footer-relations">
    
      <div class="pull-left">
        <a class="btn btn-default" href="bash_lesson.html" title="previous chapter (use the left arrow)">4. Using the command line</a>
      </div>
    
      <div class="pull-right">
        <a class="btn btn-default" href="quality-trimming.html" title="next chapter (use the right arrow)">6. Short read quality and trimming</a>
      </div>
    </div>
    <div class="clearer"></div>
  
        </div>
        <div class="clearfix"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="quality-trimming.html" title="6. Short read quality and trimming"
             >next</a> |</li>
        <li class="right" >
          <a href="bash_lesson.html" title="4. Using the command line"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="toc.html">2019-UNR-omics 0.0.1 documentation</a> &#187;</li> 
      </ul>
    </div>
<script type="text/javascript">
  $("#mobile-toggle a").click(function () {
    $("#left-column").toggle();
  });
</script>
<script type="text/javascript" src="_static/js/bootstrap.js"></script>
  <div class="footer">
    &copy; Copyright 2019, Elias Oziolor, Sateesh Peri. Created using <a href="http://sphinx.pocoo.org/">Sphinx</a>.
  </div>
  </body>
</html>